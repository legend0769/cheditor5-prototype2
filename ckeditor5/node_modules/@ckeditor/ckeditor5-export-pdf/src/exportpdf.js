/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x35e502}from'ckeditor5/src/core';import{ButtonView as _0x188330,View as _0x250dd2,Notification as _0x579739}from'ckeditor5/src/ui';import _0x35a0a6 from'./exportpdfcommand';import _0x122703 from'../theme/icons/exportpdf.svg';import'../theme/exportpdf.css';export default class p extends _0x35e502{static get['pluginName'](){return'ExportPdf';}static get['requires'](){return['CloudServices',_0x579739];}['init'](){const _0x4a5f1b=this['editor'],t=_0x4a5f1b['t'],_0x54d016=_0x4a5f1b['config']['get']('exportPdf')||{};_0x4a5f1b['commands']['add']('exportPdf',new _0x35a0a6(_0x4a5f1b)),_0x4a5f1b['ui']['componentFactory']['add']('exportPdf',_0x3d5ed2=>{const _0x75396=_0x4a5f1b['commands']['get']('exportPdf'),_0x321a99=new _0x188330(_0x3d5ed2);_0x321a99['set']({'label':t('Export\x20to\x20PDF'),'icon':_0x122703,'tooltip':!0x0}),_0x321a99['bind']('isOn','isEnabled')['to'](_0x75396,'isBusy','isEnabled'),_0x321a99['extendTemplate']({'attributes':{'class':[_0x321a99['bindTemplate']['if']('isOn','ck-exportpdf_status-pending')]}});const _0x513e90=new _0x250dd2();return _0x513e90['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner-container']},'children':[{'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner']}}]}),_0x321a99['children']['add'](_0x513e90),this['listenTo'](_0x321a99,'execute',()=>{_0x4a5f1b['execute']('exportPdf',_0x54d016),_0x4a5f1b['editing']['view']['focus']();}),_0x321a99;});const _0xbe725c=_0x4a5f1b['plugins']['get']('CloudServices');if(!0x1===_0x54d016['tokenUrl'])this['_token']=null;else{if(_0x54d016['tokenUrl'])return _0xbe725c['registerTokenUrl'](_0x54d016['tokenUrl'])['then'](_0x36996b=>{this['_token']=_0x36996b;});this['_token']=_0xbe725c['token'];}}}